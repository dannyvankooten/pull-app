(window["webpackJsonppull-app"]=window["webpackJsonppull-app"]||[]).push([[0],{28:function(e,t,a){e.exports=a(44)},33:function(e,t,a){},34:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),c=a.n(s),i=(a(33),a(5)),o=a(6),l=a(8),u=a(7),m=a(9),p=(a(34),a(12)),d=a(11),v=a(27),h=a(10),b=a(15),E=a.n(b),f=a(24);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(f.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function y(e,t,a){a=O({},a,{},O({method:e,credentials:"include",headers:O({},a.headers||{})},{Accept:"application/json"}));var n="localhost"===window.location.hostname?"http://localhost:3001":"http://pull-app.dvk.co";return window.fetch(n+t,a).then(function(e){return e.json()})}var j={get:function(e){return y("GET",e,{})},post:function(e,t){return y("POST",e,{headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},date:function(e){return e=e.replace(" ","T"),e+="Z",new Date(e)}},w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={count:parseInt(localStorage.getItem("repetitions"))||1,buttonText:"Save",activities:[]},a.save=a.save.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.get("/activities").then(function(t){t=t.map(function(e){return e.date=j.date(e.timestamp),e}),e.setState({activities:t})})}},{key:"save",value:function(e){var t=this;this.setState({buttonText:"Saving"}),localStorage.setItem("repetitions",this.state.count),j.post("/activities",{repetitions:this.state.count}).then(function(e){e.date=j.date(e.timestamp),t.setState({activities:[e].concat(Object(v.a)(t.state.activities)),buttonText:"Save"})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"track"},r.a.createElement("div",{className:"track-count"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"control",onClick:function(t){var a=Math.max(1,e.state.count-1);e.setState({count:a})}},"-")),r.a.createElement("td",null,r.a.createElement("span",{className:"count"},this.state.count)),r.a.createElement("td",null,r.a.createElement("span",{className:"control",onMouseDown:function(t){var a=e.state.count+1;e.setState({count:a})}},"+")))))),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.save,className:"button"},this.state.buttonText)),r.a.createElement("div",{className:"activity-list"},this.state.activities.map(function(e){return r.a.createElement("div",{key:"activity-".concat(e.id)},r.a.createElement("strong",null,"you")," did ",r.a.createElement("strong",null,e.repetitions)," reps ",r.a.createElement("span",{className:"activity-ts"},r.a.createElement(E.a,{datetime:e.date})))})))}}]),t}(r.a.Component);var S=function(){return r.a.createElement("h1",null,"Stats")},N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={activities:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.get("/activities?feed=1").then(function(t){t=t.map(function(e){return e.date=j.date(e.timestamp),e}),e.setState({activities:t})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"feed activity-list"},this.state.activities.map(function(e){return r.a.createElement("div",{key:"activity-".concat(e.id)},r.a.createElement("strong",null,e.username)," did ",r.a.createElement("strong",null,e.repetitions)," reps ",r.a.createElement("span",{className:"activity-ts"},r.a.createElement(E.a,{datetime:e.date})))}))}}]),t}(r.a.Component),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).submit=a.submit.bind(Object(h.a)(a)),a.state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"submit",value:function(e){var t=this;e.preventDefault();var a=e.target;j.post("/login",{username:a.username.value,password:a.password.value}).then(function(e){e?(t.props.onSuccess({authenticated:!0,user:e}),t.props.history.push("/")):t.setState({error:"Invalid credentials."})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{method:"post",onSubmit:this.submit},r.a.createElement("div",{className:"margin-s"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username"})),r.a.createElement("div",{className:"margin-s"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password"})),r.a.createElement("div",{className:"margin-s"},r.a.createElement("button",{type:"submit"},"Login")),this.state.error?r.a.createElement("div",{className:"notice notice-warning"},this.state.error):""),r.a.createElement("div",{className:"margin-s"},r.a.createElement("p",null,"No account? ",r.a.createElement(d.a,{to:"/register"},"Register here"),".")))}}]),t}(r.a.Component),x=Object(p.e)(k),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).submit=a.submit.bind(Object(h.a)(a)),a.state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"submit",value:function(e){var t=this;e.preventDefault();var a=e.target;a.password.value===a.password_confirmation.value?j.post("/register",{username:a.username.value,password:a.password.value,passwordConfirmation:a.password_confirmation.value}).then(function(e){e&&(t.props.onSuccess({authenticated:!0,user:e}),t.props.history.push("/"))}):this.setState({error:"Passwords do not match."})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("form",{method:"POST",onSubmit:this.submit},r.a.createElement("div",{className:"margin-s"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",required:!0,minLength:"2"})),r.a.createElement("div",{className:"margin-s"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",required:!0,minLength:"6",maxLength:"72"})),r.a.createElement("div",{className:"margin-s"},r.a.createElement("label",null,"Repeat password"),r.a.createElement("input",{type:"password",name:"password_confirmation",required:!0,minLength:"6",maxLength:"72"})),r.a.createElement("div",{className:"margin-s"},r.a.createElement("button",{type:"submit"},"Register")),this.state.error?r.a.createElement("div",{className:"notice notice-warning"},this.state.error):""),r.a.createElement("div",{className:"margin-s"},r.a.createElement("p",null,"Already registered? ",r.a.createElement(d.a,{to:"/login"},"Login here"),".")))}}]),t}(r.a.Component),D=Object(p.e)(P),T=a(2),C=Object(T.a)(),L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:null},j.get("/session").then(function(e){a.setState({user:e}),e||C.push("/login")}),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(p.b,{history:C},this.state.user?r.a.createElement("div",{className:"menu"},r.a.createElement(d.a,{exact:!0,to:"/"},"Track"),r.a.createElement(d.a,{exact:!0,to:"/feed"},"Feed"),r.a.createElement(d.a,{exact:!0,to:"/stats"},"Stats")):"",r.a.createElement("div",null,r.a.createElement(p.a,{path:"/",exact:!0,component:w}),r.a.createElement(p.a,{path:"/feed",component:N}),r.a.createElement(p.a,{path:"/stats",component:S}),r.a.createElement(p.a,{path:"/login",render:function(t){return r.a.createElement(x,{onSuccess:function(t){return e.setState(t)}})}}),r.a.createElement(p.a,{path:"/register",render:function(t){return r.a.createElement(D,{onSuccess:function(t){return e.setState(t)}})}}))))}}]),t}(r.a.Component);c.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.a46bad05.chunk.js.map