{"version":3,"sources":["lib/api.js","components/Track.js","components/Stats.js","components/Feed.js","components/Login.js","components/Register.js","App.js","index.js"],"names":["request","method","path","args","credentials","headers","base","window","location","hostname","fetch","then","r","json","get","post","data","body","JSON","stringify","date","utcDatetimeString","replace","Date","Track","props","state","count","parseInt","localStorage","getItem","buttonText","activities","save","bind","api","map","a","timestamp","setState","evt","this","setItem","repetitions","activity","className","onClick","e","Math","max","onMouseDown","key","id","datetime","React","Component","Stats","Feed","username","Login","submit","preventDefault","form","target","value","password","user","onSuccess","authenticated","history","push","error","onSubmit","type","name","to","withRouter","Register","password_confirmation","passwordConfirmation","required","minLength","maxLength","createBrowserHistory","App","exact","component","render","s","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.a46bad05.chunk.js","sourcesContent":["function request(method, path, args) {\n  args = {...args, ...{\n      method: method,\n      credentials: 'include',\n      headers: {...args.headers || {}}, ...{\n          'Accept': 'application/json',\n        }\n   }};\n\n  const base = window.location.hostname === 'localhost' ? 'http://localhost:3001' : 'http://pull-app.dvk.co';\n\n  return window.fetch(base + path, args)\n      .then(r => r.json())\n}\n\nfunction get(path) {\n  return request('GET', path, {});\n}\n\nfunction post(path, data) {\n  return request('POST', path, {\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  })\n}\n\nfunction date(utcDatetimeString) {\n  utcDatetimeString = utcDatetimeString.replace(' ', 'T');\n  utcDatetimeString = utcDatetimeString + \"Z\";\n  let d = new Date(utcDatetimeString);\n  return d;\n}\n\nexport default { get, post, date }","import React from 'react';\nimport TimeAgo from 'timeago-react';\nimport api from './../lib/api.js';\n\nclass Track extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      count: parseInt(localStorage.getItem('repetitions')) || 1,\n      buttonText: \"Save\",\n      activities: [],\n    };\n\n    this.save = this.save.bind(this)\n  }\n\n  componentDidMount() {\n    api.get('/activities')\n    .then((activities) => {\n      activities = activities.map(a => {\n        a.date = api.date(a.timestamp)\n        return a;\n      })\n      this.setState({activities})\n    })\n  }\n\n  save(evt) {\n    this.setState({buttonText: \"Saving\"});\n    localStorage.setItem('repetitions', this.state.count);\n\n    api.post('/activities', {\n    \trepetitions: this.state.count\n    }).then((activity) => {\n    \tactivity.date = api.date(activity.timestamp)\n        \n        this.setState({\n           activities: [activity, ...this.state.activities],\n           buttonText: \"Save\"\n        })\n      })\n  }\n\n  render() {\n    return (<div className=\"track\">\n    \t<div className=\"track-count\">\n  \t\t<table>\n  \t\t\t<tbody>\n  \t\t\t<tr>\n  \t\t\t\t<td>\t\n\t\t        <span className=\"control\" onClick={(e) => {\n\t\t          let count = Math.max(1, this.state.count - 1);\n\t\t          this.setState({count})}\n\t\t        }>-</span>\n  \t\t\t\t</td>\n  \t\t\t\t<td>\n  \t\t\t\t\t <span className=\"count\">{this.state.count}</span>\n  \t\t\t\t</td>\n  \t\t\t\t<td>\n  \t\t\t\t\t<span className=\"control\"  onMouseDown={(evt) => {\n\t\t\t          let count = this.state.count + 1;\n\t\t\t          this.setState({count})}\n\t\t\t        }>+</span>\n  \t\t\t\t</td>\n  \t\t\t</tr>\n  \t\t\t</tbody>\n  \t\t</table>\n      </div>\n\t\t\t<div>\n        <button onClick={this.save} className=\"button\">{this.state.buttonText}</button>\n      </div>\n      <div className=\"activity-list\">\n        {this.state.activities.map(a => (\n            <div key={`activity-${a.id}`}>\n              <strong>you</strong> did <strong>{a.repetitions}</strong> reps <span className=\"activity-ts\"><TimeAgo datetime={a.date} /></span>\n            </div>\n        ))}\n      </div>\n    </div>)\n  }\n}\n\nexport default Track","import React from 'react';\n\nfunction Stats() { return <h1>Stats</h1>  }\n\nexport default Stats","import React from 'react';\nimport api from './../lib/api.js';\nimport TimeAgo from 'timeago-react';\n\nclass Feed extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activities: [],\n    };\n  }\n\n  componentDidMount() {\n  \tapi.get('/activities?feed=1')\n    .then((activities) => {\n      activities = activities.map(a => {\n        a.date = api.date(a.timestamp)\n        return a;\n      })\n      this.setState({activities})\n    })\n  }\n\n  render() {\n  \treturn (\n  \t\t<div className=\"feed activity-list\">\n  \t\t\t {this.state.activities.map(a => (\n            <div key={`activity-${a.id}`}>\n              <strong>{a.username}</strong> did <strong>{a.repetitions}</strong> reps <span className=\"activity-ts\"><TimeAgo datetime={a.date} /></span>\n            </div>\n        ))}\n  \t\t</div>\n  \t)\n  }\n}\n\nexport default Feed","import React from 'react';\n\nimport { withRouter, NavLink } from \"react-router-dom\";\nimport api from './../lib/api.js';\n\nclass Login extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.submit = this.submit.bind(this)\n\t\tthis.state = {}\n\t}\n\n\tsubmit(evt) {\n\t\tevt.preventDefault();\n\t\tconst form = evt.target;\n\n\t\tapi.post('/login', {\n\t\t\tusername: form.username.value,\n\t\t\tpassword: form.password.value,\n\t\t}).then(user => {\n\t\t\tif (!user) {\n\t\t\t\tthis.setState({ error: 'Invalid credentials.'})\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.props.onSuccess({ \n\t\t\t\tauthenticated: true,\n\t\t\t\tuser: user\n\t\t\t})\n\t\t\tthis.props.history.push('/') \n\t\t})\n\t}\n\n\trender() {\n\treturn (\n\t\t<div>\n\t\t\t<h1>Login</h1> \n\t\t\t<form method=\"post\" onSubmit={this.submit}>\n\t\t\t\t<div className=\"margin-s\">\n\t\t\t\t\t<label>Username</label>\n\t\t\t\t\t<input type=\"text\" name=\"username\"/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"margin-s\">\n\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t<input type=\"password\" name=\"password\" />\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"margin-s\">\n\t\t\t\t\t<button type=\"submit\">Login</button>\n\t\t\t\t</div>\n\n\t\t\t\t{this.state.error ? <div className=\"notice notice-warning\">{this.state.error}</div> : ''}\n\t\t\t</form>\n\n\t\t\t<div className=\"margin-s\">\n\t\t\t\t<p>No account? <NavLink to=\"/register\">Register here</NavLink>.</p>\n\t\t\t</div>\n\t\t</div>)\n\t}\n}\n\nexport default withRouter(Login)","import React from 'react';\nimport { withRouter, NavLink } from \"react-router-dom\";\nimport api from './../lib/api.js';\n\nclass Register extends React.Component { \n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.submit = this.submit.bind(this)\n\t\tthis.state = {}\n\t}\n\n\tsubmit(evt) {\n\t\tevt.preventDefault();\n\t\tconst form = evt.target;\n\n\t\tif (form.password.value !== form.password_confirmation.value) {\n\t\t\tthis.setState({error: \"Passwords do not match.\"})\n\t\t\treturn\n\t\t}\n\n\t\tapi.post('/register', {\n\t\t\tusername: form.username.value,\n\t\t\tpassword: form.password.value,\n\t\t\tpasswordConfirmation: form.password_confirmation.value,\n\t\t}).then(user => {\n\t\t\tif (!user) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.props.onSuccess({authenticated: true, user: user})\n\t\t\tthis.props.history.push('/')\n\t\t})\n\t}\n\n\trender() {\n\treturn (\n\t\t<div>\n\t\t\t<h1>Register</h1> \n\t\t\t<form method=\"POST\" onSubmit={this.submit}>\n\t\t\t\t<div className=\"margin-s\">\n\t\t\t\t\t<label>Username</label>\n\t\t\t\t\t<input type=\"text\" name=\"username\" required minLength=\"2\" />\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"margin-s\">\n\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t<input type=\"password\" name=\"password\" required minLength=\"6\" maxLength=\"72\" />\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"margin-s\">\n\t\t\t\t\t<label>Repeat password</label>\n\t\t\t\t\t<input type=\"password\" name=\"password_confirmation\" required minLength=\"6\" maxLength=\"72\" />\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"margin-s\">\n\t\t\t\t\t<button type=\"submit\">Register</button>\n\t\t\t\t</div>\n\n\t\t\t\t{this.state.error ? <div className=\"notice notice-warning\">{this.state.error}</div> : ''}\n\t\t\t</form>\n\n\t\t\t<div className=\"margin-s\">\n\t\t\t\t<p>Already registered? <NavLink to=\"/login\">Login here</NavLink>.</p>\n\t\t\t</div>\n\t\t</div>)\n\t}\n}\n\nexport default withRouter(Register)","import React from 'react';\nimport './App.css';\nimport { Router, Route, NavLink } from \"react-router-dom\";\nimport Track from './components/Track.js';\nimport Stats from './components/Stats.js';\nimport Feed from './components/Feed.js';\nimport Login from './components/Login.js';\nimport Register from './components/Register.js';\nimport { createBrowserHistory } from \"history\";\nimport api from './lib/api.js';\n\nconst history = createBrowserHistory();\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      user: null\n    }\n\n    api.get('/session')\n      .then(user => {\n        this.setState({user})\n\n        if (!user) {\n          history.push('/login')\n        }\n      })\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <Router history={history}>\n          {this.state.user ? \n            <div className=\"menu\">\n              <NavLink exact to=\"/\">Track</NavLink>\n              <NavLink exact to=\"/feed\">Feed</NavLink>\n              <NavLink exact to=\"/stats\">Stats</NavLink>\n            </div> : ''}\n\n            <div>\n              <Route path=\"/\" exact component={Track} />\n              <Route path=\"/feed\" component={Feed} />\n              <Route path=\"/stats\" component={Stats} />\n              <Route path=\"/login\" render={props => <Login onSuccess={s => this.setState(s) } />} />\n              <Route path=\"/register\" render={props => <Register onSuccess={s => this.setState(s) } />} />\n            </div> \n          \n        </Router>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}